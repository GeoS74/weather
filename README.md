# Weather

Тестовый пример backend приложения на Node.js специально для Vovarama1992 :)

### Описание
Приложение реализует 2 маршрута.

##### POST `/api`
Принимает и записывает в оперативную память город. Контроль уникальности городов не реализован, поэтому можно несколько раз записать одно и тоже значение.
Ожидает получить название города в поле формы с именем `city`. В случае неудачи (если в запросе не передаётся поле с именем `city`) возвращает статус 400 и объект с описанием ошибки.
В случае успеха возвращает статус 201 и массив с вновь добавленными городами.

##### GET `/api`
Возвращает массив всех ранее записанных городов.
В случае успеха возвращает статус 200 и массив всех записанных городов.

### Установка и запуск

Для запуска выполнить следующие шаги:
1) клонировать репозиторий
2) установить пакеты командой `npm install`
3) запустить проект командой `node index`

### Конфигурация проекта

Файл конфигурации `./config.js` содержит дефолтные значения переменных приложения. Для их изменения можно передать переменные в командной строке при запуске или создать в корне проекта файл `./secret.env`.

Пример файла `./secret.env` для изменения порта:

```
SERVER_PORT=3111
```

### Линтер

Для запуска линтера выполнить в терминале `npm run lint`
Для запуска линтера в режиме автоматического исправления ошибок выполнить в терминале `npm run lint:fix`

>Прим.: в данной реализации при запуске линтера в консоле отобразиться 3 ошибки. Первая `warning  Unexpected console statement  no-console` возникает из-за того, что в коде проекта используется вызовы `console.log(...)`, что противоречит хорошему подходу в написании кода. Правильно было бы использовать какой-нибудь сторонний логгер типа `log4js`. Здесь это не реализовано дабы не усложнять понимание кода приложения. Вторая ошибка `error  'next' is defined but never used  no-unused-vars` возникает из-за тогог, что в функции обработчике ошибок express-a должно быть 4 аргумента, иначе она будет трактоваться express-ом не как обработчик ошибок, а как обыкновенный middleware. Эти правила линтера можно было бы выключить, но это может привести к дополнительным ошибкам при дальнейшей разработке приложения.

### Тесты
Для запуска тестов выполнить в терминале `npm test`

В проекте реализованы простейшие тесты, которые проверяют роуты на работоспособность, а именно правильность возвращаемых статусов и формат ответа.

>Прим. в пакете `chai` версии 5 и выше не доступны модули commonjs, а т.к. приложение использует именно эти модули, то должна быть установлена версия 4.
